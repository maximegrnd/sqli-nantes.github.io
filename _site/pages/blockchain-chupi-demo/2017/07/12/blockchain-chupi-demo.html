<h1 id="bundle-chupi-demo">Bundle Chupi Demo</h1>

<p>Chupi is a demonstration of the blockchain Ethereum made by SQLI-Nantes, showed at the DevFest 2016. In order to make easier to launch this app, we made this bundle.</p>

<h1 id="prerequisites">Prerequisites</h1>

<p>This demo was showed with:</p>

<ul>
  <li>An Ubuntu 16.04 laptop with network card AP compatible;</li>
  <li>a Raspberry Pi 2 with a LED;</li>
  <li>an Android 5.0 smartphone.</li>
</ul>

<p><em>The bundle is related to the laptop. You may have to configure Chupi or AndJIM regarding to their repository README.</em></p>

<h1 id="installation">Installation</h1>

<ul>
  <li>Docker: https://docs.docker.com/engine/installation/linux/ubuntu/</li>
  <li>Docker-Compose: https://docs.docker.com/compose/install/</li>
  <li>Some tools: <code class="highlighter-rouge">sudo apt install git iw</code></li>
</ul>

<p>Then you need some files not provided at the root directory :</p>
<ul>
  <li>genesis.json</li>
</ul>

<h1 id="check-hardware-requirement">Check hardware requirement</h1>

<p><strong>Your wifi card must support “access point” mode, otherwise this script won’t work.</strong></p>

<h1 id="demo">Demo</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>$ cd bundle
$ ./bundle.sh pull
$ ./bundle.sh start wlp1s0 (or any other name you can get with: )
  # Connect Chupi to the AP "Blockchain-WIFI" with passphrase in wlan_config.txt
  # Start Chupi

  # You can connect to Chupi via SSH, on @IP: 192.168.7.61
  # SSH connection: docker exec ap-container ssh pi@192.168.7.61

  # Connect android device (with AndroidJim app) to the AP "Blockchain-WIFI" with passphrase in wlan_config.txt
  # Do the demo
$ ./bundle.sh stop wlp1s0
</code></pre>
</div>

<h1 id="usage">Usage</h1>

<h2 id="bundle-usage">Bundle usage</h2>

<p><code class="highlighter-rouge">./bundle.sh -h|pull|start|stop|clean [interface]</code></p>

<ul>
  <li><code class="highlighter-rouge">-h</code> display the usage</li>
  <li><code class="highlighter-rouge">pull</code> download required sources and containers, create config files if does not exists</li>
  <li><code class="highlighter-rouge">start</code> start the bundle in this order :
    <ul>
      <li>Docker-AP, the Wifi network manager, container named <strong>ap-container</strong></li>
      <li>NTPServer, the NTP server</li>
      <li>Bootnode, the bootnode of the demo, container named <strong>bootnode</strong></li>
      <li>Dashblock, the UI logger of the demo, container named <strong>dashblock</strong></li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">stop</code> stop the bundle in the inverse order of start</li>
  <li><code class="highlighter-rouge">clean</code> delete some files</li>
</ul>

<h1 id="configuration">Configuration</h1>

<p>After a <code class="highlighter-rouge">./bundle pull</code>, you can customize your configuration.</p>

<h2 id="wifi-configuration">Wifi configuration</h2>

<p>In the <em>docker-ap</em> directory, the file <em>wlan_config.txt</em> contains the informations relatives to the WIFI configuration.</p>

<ul>
  <li><strong>SSID</strong> : Name of the Wifi</li>
  <li><strong>PASSPHRASE</strong> : Passphrase/Password of the Wifi</li>
</ul>

<h2 id="dashblock-configuration">Dashblock configuration</h2>

<p><em>names.json</em> contain a JSON-formated list of names/account tuple. Refer to Dashblock repository.</p>

<p>Example :</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"foo"</span><span class="p">,</span><span class="nt">"address"</span><span class="p">:</span><span class="s2">"0x1234"</span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"bar"</span><span class="p">,</span><span class="nt">"address"</span><span class="p">:</span><span class="s2">"0x5678"</span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
</div>

<h2 id="bootnode-configuration">Bootnode configuration</h2>

<p><em>genesis.json</em> contains the blockchain configuration. Refer to Bootnode repository.</p>

<p>Example :</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0000000000000042"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"parentHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0000000000000000000000000000000000000000000000000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"extraData"</span><span class="p">:</span><span class="w"> </span><span class="s2">"S Q L I blockchain"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"gasLimit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x8000000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"difficulty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x20000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"mixhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0000000000000000000000000000000000000000000000000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"coinbase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0000000000000000000000000000000000000042"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alloc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">     </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="ip-tables-configuration">IP Tables configuration</h2>

<p>Add in the <em>iptables_conf.sh</em> script the iptables lines you want to launch at the start of the bundle.</p>

<h2 id="dhcp-fixed-address">DHCP fixed address</h2>

<p>The <em>bundle.sh</em> script fix the IP of Chupi with its MAC address. If you want to change it, look for <code class="highlighter-rouge"># DHCP CONFIG</code> commentary in order to find the line where to replace the MAC address.</p>
