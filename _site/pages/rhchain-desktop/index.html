<!DOCTYPE HTML>

<html>

	<head>
		<title>Projet - rhchain-desktop</title>
		<meta charset="utf-8" />
		<meta name="description" content=""/>
		<link rel="stylesheet" href="../../css/main.css"/>
		<link rel="stylesheet" href="../../css/styles/tomorrow.css">
	</head>

	<body>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<h1>rhchain-desktop</h1>
						<p><ul class="statistics">
								<li id="init_date">Created</li>
								<li id="last_update">Updated</li>
								<li id="nb_contributors">contributors</li>
								<li id="nb_commits">commits</li>
						</ul></p>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul id="summary">
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Content -->
							<section id="content" class="main">
										<!-- <span class="image main"><img src="../../images/*.ext" alt="" /></span> -->
							
								<!-- Macro Jekyll -->
										                                                            <div class="content"> <h1 id="installation">Installation</h1>

<h2 id="from-sources-latest-version">from sources (latest version)</h2>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>git clone https://gitlab-toulouse.sqli.com/blockchain-nantes/RHChain.git

<span class="nb">cd </span>RHChain/

docker build -t rhchain -f docker/Dockerfile .

</code></pre>
</div>

<h2 id="from-dockerhub">from dockerhub</h2>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>docker pull sqlinantes/rhchain-desktop
</code></pre>
</div>

<h1 id="run">Run</h1>

<p>:warning: Use <code class="highlighter-rouge">sqlinantes/rhchain-desktop</code> instead of <code class="highlighter-rouge">rhchain</code> if you downloaded image from dockerhub</p>

<h2 id="as-admin">As admin</h2>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>docker run -ti --rm -p 3000:3000 -p 30303:30303 -p 3001:3001 -p 8000:8000 rhchain
</code></pre>
</div>

<h2 id="as-user">As user</h2>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>docker run -ti --rm -p 3000:3000 -p 30303:30303 -p 3001:3001  -p 8000:8000 -e <span class="nv">BOOTNODE</span><span class="o">=</span><span class="s2">"ADMIN_IP"</span> rhchain
</code></pre>
</div>

<p>Replace <em>ADMIN_IP</em> by ip of the machine running the admin container</p>

<h2 id="local">Local</h2>

<p>If you want to run the demo on a single machine, modify port mapping between host and container to prevent conflicts, for example :</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>docker run -ti --rm -p 3010:3000 -p 30313:30303 -p 3011:3001 -e <span class="nv">BOOTNODE</span><span class="o">=</span><span class="s2">"ADMIN_CONTAINER_IP"</span> rhchain
</code></pre>
</div>

<p>Replace <em>ADMIN_CONTAINER_IP</em> by ip of the container running as admin.</p>

<h3 id="find-admin-container-ip">Find Admin container IP</h3>

<p>You can find the ip using :</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>docker ps
</code></pre>
</div>
<p>locate admin <strong>CONTAINER ID</strong> (first column in the response).</p>

<p>Then :</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>docker inspect CONTAINER_ID | grep IPAddress
</code></pre>
</div>

<h2 id="demo">DEMO</h2>

<ol>
  <li>
    <p>Download image</p>

    <div class="language-bash highlighter-rouge"><pre class="highlight"><code> docker pull sqlinantes/rhchain-desktop
</code></pre>
    </div>
  </li>
  <li>
    <p>Launch containers</p>

    <p>Demo requires 2 miners (go-ethereum private network issue). You have to run 2 containers (1 as admin and 1 as collaborator).</p>

    <ul>
      <li>ADMIN</li>
    </ul>

    <div class="language-bash highlighter-rouge"><pre class="highlight"><code> docker run -ti --rm -p 3000:3000 -p 30303:30303 -p 3001:3001 -p 8000:8000  sqlinantes/rhchain-desktop
</code></pre>
    </div>

    <ul>
      <li>COLLABORATOR
 In another terminal</li>
    </ul>

    <div class="language-bash highlighter-rouge"><pre class="highlight"><code> docker run -ti --rm -p 4000:3000 -p 40303:30303 -p 4001:3001 -p 9000:8000 -e <span class="nv">BOOTNODE</span><span class="o">=</span><span class="s2">"172.17.0.2"</span> sqlinantes/rhchain-desktop
</code></pre>
    </div>
  </li>
  <li>
    <p>Download rhchain-mobile</p>

    <p>git clone https://github.com/sqli-nantes/rhchain-android.git</p>
  </li>
  <li>
    <p>Get collaborator enode</p>

    <p>in collaborator container type :</p>
    <div class="highlighter-rouge"><pre class="highlight"><code> admin.nodeInfo.id
</code></pre>
    </div>
  </li>
  <li>
    <p>Inject it into rhchain-mobile</p>

    <p>replace in file <code class="highlighter-rouge">rhchain-mobile/app/src/main/java/nantes_sqli/rhchain/blockchain/GethConfigConstants.java</code>
 the value of <code class="highlighter-rouge">ENODE_NODE2</code></p>
  </li>
  <li>Launch the app in an android emulator</li>
  <li><strong>[ MOBILE ]</strong> clic on <code class="highlighter-rouge">cr√©er un compte</code></li>
  <li><strong>[ MOBILE ]</strong> register then <code class="highlighter-rouge">OK</code></li>
  <li><strong>[ DESKTOP-ADMIN ]</strong> connect with the password <em>admin</em></li>
  <li><strong>[ DESKTOP-ADMIN ]</strong> clic on the top-right user icon</li>
  <li><strong>[ DESKTOP-ADMIN ]</strong> <code class="highlighter-rouge">crediter le compte</code> then go back to the survey page</li>
  <li><strong>[ MOBILE ]</strong> connect with your password set in <strong>8.</strong></li>
  <li><strong>[ MOBILE AND DESKTOP-COLLAB ]</strong> send your survey</li>
  <li><strong>[ DESKTOP-ADMIN ]</strong> close the survey with visibility</li>
  <li><strong>[ MOBILE AND DESKTOP-COLLAB ]</strong> See the results</li>
</ol>
 </div>  
										
							</section>

					</div>

				<!-- Footer -->
					<footer id="footer">
						<p class="copyright"><a href="http://www.sqli.com/"><img src="../../images/logo_sqli.png" height="24" width="44" style="vertical-align: middle; border: 0px"></a> | SQLi Nantes &copy; 2017 - CC-BY-SA 4.0. Design: <a href="https://html5up.net">HTML5 UP</a> modified by <a href="https://github.com/maximegrnd">Maxime GRAND</a>.</p>
					</footer>

			</div>

		<!-- Scripts -->
			<script type="text/javascript" src="../../js/jquery.min.js"></script>
			<script type="text/javascript" src="../../js/jquery.scrollex.min.js"></script>
			<script type="text/javascript" src="../../js/jquery.scrolly.min.js"></script>
			<script type="text/javascript" src="../../js/skel.min.js"></script>
			<script type="text/javascript" src="../../js/util.js"></script>
			<script type="text/javascript" src="../../js/main.js"></script>
			<script type="text/javascript" src="../../js/url_request.js"></script>
			<script type="text/javascript" src="js/data_rhchain_desktop.js"></script>
			<script type="text/javascript" src="../../js/generate_summary.js"></script>
			<script type="text/javascript" src="../../js/highlight.pack.js"></script>
			<script>hljs.initHighlightingOnLoad();</script>

	</body>
</html>