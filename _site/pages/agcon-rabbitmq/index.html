<!DOCTYPE HTML>

<html>

	<head>
		<title>Projet - acgon-rabbitmq</title>
		<meta charset="utf-8" />
		<meta name="description" content=""/>
		<link rel="stylesheet" href="../../css/main.css"/>
		<link rel="stylesheet" href="../../css/styles/tomorrow.css">
	</head>

	<body>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<h1>acgon-rabbitmq</h1>
						<p><ul class="statistics">
								<li id="init_date">Created</li>
								<li id="last_update">Updated</li>
								<li id="nb_contributors">contributors</li>
								<li id="nb_commits">commits</li>
						</ul></p>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul id="summary">
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Content -->
							<section id="content" class="main">
										<!-- <span class="image main"><img src="../../images/*.ext" alt="" /></span> -->
							
								<!-- Macro Jekyll -->
										                                                    <div class="content"> <h1 id="test-de-docker-de-brocker-rabbitmq">Test de Docker de brocker rabbitmq</h1>

<p>sudo -i
export AWS_PROJECT = agcon-rabbitmq</p>

<h3 id="creation-du-groupe">CREATION DU GROUPE</h3>
<p>aws ec2 create-security-group –group-name docksg$AWS_PROJECT –description dock-security-group-$AWS_PROJECT</p>
<h1 id="ssh">SSH</h1>
<p>aws ec2 authorize-security-group-ingress –group-name docksg$AWS_PROJECT –protocol tcp –port 22 –cidr 0.0.0.0/0</p>
<h1 id="port-par-defaut-de-rabbitmq">port par defaut de rabbitmq</h1>
<p>aws ec2 authorize-security-group-ingress –group-name docksg$AWS_PROJECT –protocol tcp –port 5672 –cidr 0.0.0.0/0</p>

<h3 id="creation-de-la-docker-machine">creation de la docker-machine</h3>
<p>docker-machine create –driver amazonec2 \
–amazonec2-region us-east-1 \
–amazonec2-zone c \
–amazonec2-security-group docksg$AWS_PROJECT \
–amazonec2-tags project:$AWS_PROJECT dockinstance$AWS_PROJECT</p>

<p>#Recuperation de l’instance ID
export AWS_ID=<code class="highlighter-rouge">aws ec2 describe-instances --filters "Name=tag-value,Values=dockinstance$AWS_PROJECT" --output text --query 'Reservations[0].Instances[0].InstanceId'</code>
echo $AWS_ID</p>

<h4 id="definit-le-variables-denv-pour-definir-ce-docker-host-par-default">definit le variables d’env pour definir ce docker host par default</h4>
<p>eval $(docker-machine env dockinstance$AWS_PROJECT)
################ docker machine ip
docker-machine ip dockinstance$AWS_PROJECT
################ docker machine shh
docker-machine ssh dockinstance$AWS_PROJECT</p>

<h3 id="build-de-limage-docker">build de l’image docker</h3>
<p>docker build -t brocker .
docker-compose up -d</p>

<h3 id="suppression-de-la-docker-machine">suppression de la docker machine</h3>
<p>docker-machine rm dockinstance$AWS_PROJECT</p>

<h3 id="suppression-du-security-group">suppression du security group</h3>
<p>aws ec2 delete-security-group –group-name docksg$AWS_PROJECT</p>
 </div>          

							</section>

					</div>

				<!-- Footer -->
					<footer id="footer">
						<p class="copyright"><a href="http://www.sqli.com/"><img src="../../images/logo_sqli.png" height="24" width="44" style="vertical-align: middle; border: 0px"></a> | SQLi Nantes &copy; 2017 - CC-BY-SA 4.0. Design: <a href="https://html5up.net">HTML5 UP</a> modified by <a href="https://github.com/maximegrnd">Maxime GRAND</a>.</p>
					</footer>

			</div>

		<!-- Scripts -->
			<script type="text/javascript" src="../../js/jquery.min.js"></script>
			<script type="text/javascript" src="../../js/jquery.scrollex.min.js"></script>
			<script type="text/javascript" src="../../js/jquery.scrolly.min.js"></script>
			<script type="text/javascript" src="../../js/skel.min.js"></script>
			<script type="text/javascript" src="../../js/util.js"></script>
			<script type="text/javascript" src="../../js/main.js"></script>
			<script type="text/javascript" src="../../js/url_request.js"></script>
			<script type="text/javascript" src="js/data_agcon_rabbitmq.js"></script>
			<script type="text/javascript" src="../../js/generate_summary.js"></script>
			<script type="text/javascript" src="../../js/highlight.pack.js"></script>
			<script>hljs.initHighlightingOnLoad();</script>

	</body>
</html>